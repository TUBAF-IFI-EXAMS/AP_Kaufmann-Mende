![ClassDesign_Final](https://www.plantuml.com/plantuml/png/ZLTVSzeu47_tfz3qYLoW7w2NoJG7IUCvI78DbvcRJX-4lH1TP8jAygKqvRlVhcnZsHQcF82HTbS__VQlFnhBjIqo6KLRdhpm3R1tIwMaUSVUeYXY-4aaDuPDLMwK1BVtvjRfSyxUq80LoPxT20btF8CutnPsPAmM-UQmUCO-i1MgXXHZyyIbIF-4tKZ3cYNFNBC73SO0hOtPQcU1tM-jKFcGcJkLNsTRkolF9yaIGqZsYUiMp6y5cDg-oEsNho6bVy3SgQDg1AlIAMdR--mzSFjy8_8KT92xE4FYPq8FWbwe5EGfeVlNt1apfmG9pRqM6v6Vu6h1NmWQ95Rf7QklZYkrNm-RSRvM_Qil7v_8X7VnIMFyIiePjtpe_3bVWSpnB7E06VQF4pHaxeJW4htM4XiIkYko5UWoBe9ocelyjBLQwfIvkTfKdDHCumf5pvZDXR4Nj6F0NbQt9Vx_KoAjQDzxMJmbzi7bSUCC5nlCZq5d9xqo8VXqxc7THNQpzmciKxtHAYEvS1IvyqPdlPNAP7cn-g9axgmVG5DkOQEq-05f1_uvrObK9BRQSHPwCCxPOw8quFfQAex9pPgThkq6Qc3Fnmb8cIUBR52fEqA4sx-rcKp9hsSVM5p_YNfyTjNRL1J6gkoFGaYi92nOIbmelh4DsD-PeQyzfIWkJfMKcATOha9gqeLJJx4LSo6zgpHrTOboloR8BH0LlNBjPNxhAbw4U28pORQIxpw3AQGre_WwBpBGV2NXekkRoqCakAHjfKK7yIV8qOW5XtAqc6DZi_3TianMJwGSOyBcPgqq7XWsOfq-rK1pee36kR02EzmFJkJN96qhVbem9oYSW6jrZs0joXcoeul4xgD30kxhXp8e792_pR60S7L0h7SB955i9VXNtbLFOnOJRKy2NXc5vRX50BDKlQ1qT1TpuAH7n2qXpZRDKUEgylo2yQvhWrskiDY6AvSJgRqQqUnrIYHzbo8NFoUJ_cbU2LtCosJok6udKh-G_ce6JR2jVeyjPAZGblVxmiGLo7ZMjzg9jbBm28AUxFGPaXSgLsNaTXAbVKK_NCS4ZcKLSB-epzHhZhKrhLeN7ZqOvkTiZTE7upjEWo1eEfbJfflQa06ka-VoprcGrtt7JxZHSf18gSbXG2Q5rf3RlmeeuAAqwDSs73gxJkabTzbfI8eDYNN8UA5njdgMJRShPTE6mm7I-nMZvjuvzChiygIjdgW2Kr3VAjSpgdzaPydDYtV-zRU2IpEgcKjKjkKwDBXNWchrBuO8mv-0p58zEWpTqjXpL0kTxory9oZ0ouTIgKPtZgdRKYsjxwEOq5cAd3A_AuL8aEYQ9y0QYKFuu9kEb_OFMcqqp_oqhvPQuTHKZkcp4WcCZbQrCVExJD9qcKxGL_LJ9AvHL5QFDAXklYYTm0p74jlCwjwe7WYR1U8RrLCoutfZ0cRTs8eIBIpVuHYMVUs50vUtoyNSlJ9Mr7bke168lD1mEZWaxKFwjDlI7nZ21YQinj64Twg18t_XRbfF3xVugZewO622Qjdm652ECQqfvi31PMd07Ah36k-nzOTZMiYh5wxsmDzhVU_V_xniw1tQT-HsMfhoagOzRlvMxNY3P4VtOlBbMQGfv5ydpLGIjGkGBrE_6aO-xSt-PPrtqKV8qoAJ_mC0 "ClassDesign_Final")

## Download der Bilder
Die Bilder der verschiedenen Kategorien sind in einem AWS-Bucket gespeichert. Die Indizies aller Bilder mit den verknüpften Labels sind in der csv-Datei `imageIDs.csv` enthalten. Wenn sich der Nutzer für die entsprechende Kategorie entschieden hat, wird die Datei mit der Funktion `findImageIds()` in `DataCollection` für alle Zeilen durchlaufen und die entsprechenden Bilder-IDs mit dem richtigen Label werden in die Queue eines `Datasets` geschrieben. Alle `Datasets` werden von einer `DataCollection` verwaltet. Nachdem `findImageIds()` abgeschlossen hat, wird in jedem `Dataset` der Reihe nach der Download gestartet. Übergeordnet ist dafür die Funktion `DownloadAllDataSets` in `Datacollection`  verantwortlich. In jedem `Dataset` wird die Funktion `downloadAll()` aufgerufen. Diese erzeugt 5 asynchrone Downloadtasks. Die AWSSDK stellt dafür entsprechende asynchrone Methoden bereit. In der asynchronen Task wird ein `AmazonS3Client` erzeugt, welcher für die Nutzung der AWS-Dienste notwendig ist. Mit den entsprechenden Informationen des Buckets von Open Images kann ein Transferclient erzeugt werden, welcher die API für Uploads und Downloads zur Verfügung stellt. Über diesen werden die Bilder dequeued.

Zwischen allen Tasks wird eine Counter-Instanz geteilt, um zu ermöglichen, eine begrenzte Anzahl an Bildern herunterzuladen. Diese enthälten einen Counter `value` der threadsicher um 1 verringert wird. Wird 0 unterschritten, brechen die Tasks ab. Dabei muss auf den vollständigen Download gewartet werden, um sicherzugehen, dass die Bilder existieren.

Die Grundidee des Downloadvorganges entstammt dem [Pythonscript](https://raw.githubusercontent.com/openimages/dataset/master/downloader.py) von Open Images Dataset.
